[tool:pytest]
# Pytest configuration for tap-oracle-wms

# Test discovery patterns
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Test directories
testpaths = tests
python_paths = src

# Minimum Python version
minversion = 3.8

# Add options
addopts = 
    --strict-markers
    --strict-config
    --verbose
    --tb=short
    --cov=src/tap_oracle_wms
    --cov-report=term-missing
    --cov-report=html:htmlcov
    --cov-report=xml:coverage.xml
    --cov-fail-under=85
    --durations=10
    --maxfail=5

# Markers for test categorization
markers =
    unit: Unit tests - fast, isolated tests
    integration: Integration tests - test component interactions
    e2e: End-to-end tests - test complete workflows
    live: Tests requiring live WMS connection (skip by default)
    slow: Slow running tests (skip by default unless explicitly run)
    performance: Performance and benchmark tests
    auth: Authentication related tests
    discovery: Entity discovery tests
    pagination: Pagination functionality tests
    state: State management tests
    extraction: Data extraction tests
    monitoring: Monitoring and metrics tests
    config: Configuration validation tests
    error: Error handling tests
    oracle_wms: Oracle WMS specific tests
    concurrent: Concurrency and thread safety tests
    memory: Memory usage tests
    
# Filters - skip slow and live tests by default
# To run slow tests: pytest -m "not live"
# To run live tests: pytest -m "live" 
# To run performance tests: pytest -m "performance"
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:httpx
    ignore::UserWarning:urllib3

# Test log configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S
