{
  "test_suite": "tap-oracle-wms 100% Complete E2E Tests",
  "timestamp": "2025-06-26T23:24:01.082435+00:00",
  "success": false,
  "summary": {
    "total_tests": 7,
    "passed_tests": 6,
    "failed_tests": 1,
    "success_rate": 85.71428571428571,
    "total_duration": 27.569992065429688
  },
  "configuration": {
    "config_file": "config_e2e.json",
    "base_url": "https://ta29.wms.ocs.oraclecloud.com/raizen_test",
    "pagination_mode": "cursor",
    "company_code": "*",
    "facility_code": "*",
    "start_date": "2025-06-01T00:00:00Z",
    "test_env": "production_oracle_wms"
  },
  "tests": [
    {
      "name": "Import Validation Test",
      "success": true,
      "duration": 0.9581491947174072,
      "stdout": "\u2705 Import OK\n",
      "stderr": "",
      "returncode": 0,
      "validation_details": ["Import validation successful"],
      "command": "/home/marlonsc/pyauto/.venv/bin/python -c from tap_oracle_wms import TapOracleWMS; print('\u2705 Import OK')"
    },
    {
      "name": "CLI Help Comprehensive Test",
      "success": true,
      "duration": 0.8607234954833984,
      "stdout": "Usage: python -m tap_oracle_wms [OPTIONS] COMMAND [ARGS]...\n\n  Oracle WMS Singer Tap with Extended Business Functionality.\n\n  Default behavior follows Singer SDK protocol. Extended business available\n  through organized subcommands for specific WMS business areas.\n\n  Examples -------- \\\\b # Singer protocol usage tap-oracle-wms --discover tap-\n  oracle-wms --catalog catalog.json --config config.json\n\n  \\\\b # Extended business functionality tap-oracle-wms inventory status\n  --config config.json tap-oracle-wms orders analyze-allocation --config\n  config.json tap-oracle-wms warehouse task-performance --config config.json\n\nOptions:\n  --version           Show version information\n  --discover          Run Singer discovery mode\n  --catalog FILENAME  Singer catalog file\n  --config FILENAME   Singer config file\n  --state FILENAME    Singer state file\n  --help              Show this message and exit.\n\nCommands:\n  analyze    Data analysis and business intelligence commands.\n  discover   Entity discovery and schema management commands.\n  inventory  Inventory management and tracking commands.\n  monitor    Monitoring, metrics and health check commands.\n  orders     Order management and fulfillment commands.\n  sync       Data synchronization and extraction commands.\n  warehouse  Warehouse operations and performance commands.\n",
      "stderr": "",
      "returncode": 0,
      "validation_details": [
        "CLI help validation successful - all 6 elements present"
      ],
      "command": "/home/marlonsc/pyauto/.venv/bin/python -m tap_oracle_wms --help"
    },
    {
      "name": "Discovery Schema Generation Test",
      "success": true,
      "duration": 3.201979637145996,
      "stdout": "{\n  \"streams\":[\n    {\n      \"tap_stream_id\":\"allocation\",\n      \"replication_method\":\"INCREMENTAL\",\n      \"key_properties\":[],\n      \"schema\":{\n        \"properties\":{\n          \"alloc_qty\":{\n            \"type\":\"number\"\n          },\n          \"alloc_uom_id\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"cartonize_uom_id\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"create_ts\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\",\n                \"format\":\"date-time\",\n                \"default\":\"now\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"create_user\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\",\n                \"maxLength\":30,\n                \"default\":\"\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"final_oblpn_nbr\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\",\n                \"maxLength\":30,\n                \"default\":\"\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"from_inventory_id\":{\n            \"type\":\"string\"\n          },\n          \"id\":{\n            \"type\":\"string\"\n          },\n          \"is_picking_flg\":{\n            \"anyOf\":[\n              {\n                \"type\":\"boolean\",\n                \"default\":true\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"mhe_system_id\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"mod_ts\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\",\n                \"format\":\"date-time\",\n                \"default\":\"now\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"mod_user\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\",\n                \"maxLength\":30,\n                \"default\":\"\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"ob_lpn_type_id\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"order_dtl_id\":{\n            \"type\":\"string\"\n          },\n          \"packed_qty\":{\n            \"anyOf\":[\n              {\n                \"type\":\"number\",\n                \"default\":0.0\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"pick_locn_str\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\",\n                \"maxLength\":100,\n                \"default\":\"\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"pick_user\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\",\n                \"maxLength\":30,\n                \"default\":\"\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"picked_ts\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\",\n                \"format\":\"date-time\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"status_id\":{\n            \"type\":\"string\"\n          },\n          \"task_id\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"task_seq_nbr\":{\n            \"anyOf\":[\n              {\n                \"type\":\"integer\",\n                \"minimum\":-99999999999,\n                \"maximum\":99999999999,\n                \"default\":0\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"to_inventory_id\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"type_id\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\",\n                \"default\":0\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          },\n          \"wave_id\":{\n            \"anyOf\":[\n              {\n                \"type\":\"string\"\n              },\n              {\n                \"type\":\"null\"\n              }\n            ]\n          }\n        },\n        \"type\":\"object\",\n        \"required\":[\n          \"alloc_qty\",\n          \"from_inventory_id\",\n          \"id\",\n          \"order_dtl_id\",\n          \"status_id\"\n        ],\n        \"additionalProperties\":false\n      },\n      \"stream\":\"allocation\",\n      \"metadata\":[\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"alloc_qty\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"alloc_uom_id\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"cartonize_uom_id\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"create_ts\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"create_user\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"final_oblpn_nbr\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"from_inventory_id\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"id\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"is_picking_flg\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"mhe_system_id\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"mod_ts\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"mod_user\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"ob_lpn_type_id\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"order_dtl_id\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"packed_qty\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"pick_locn_str\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"pick_user\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"picked_ts\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"status_id\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"task_id\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"task_seq_nbr\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"to_inventory_id\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"type_id\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[\n            \"properties\",\n            \"wave_id\"\n          ],\n          \"metadata\":{\n            \"inclusion\":\"available\"\n          }\n        },\n        {\n          \"breadcrumb\":[],\n          \"metadata\":{\n            \"inclusion\":\"available\",\n            \"selected\":true,\n            \"selected-by-default\":true,\n            \"table-key-properties\":[]\n          }\n        }\n      ]\n    }\n  ]\n}\n",
      "stderr": "2025-06-26 20:23:36,173 | INFO     | tap_oracle_wms.tap   | Discovering Oracle WMS streams\n2025-06-26 20:23:36,174 | INFO     | tap_oracle_wms.discovery | Discovering entities from Oracle WMS API\n2025-06-26 20:23:37,127 | INFO     | httpx                | HTTP Request: GET https://ta29.wms.ocs.oraclecloud.com/raizen_test/wms/lgfapi/v10/entity/ \"HTTP/1.1 200 OK\"\n2025-06-26 20:23:37,532 | INFO     | tap_oracle_wms.discovery | Discovered 311 entities\n2025-06-26 20:23:37,532 | INFO     | tap_oracle_wms.tap   | Skipping access verification for 1 entities (set verify_entity_access=true to enable)\n2025-06-26 20:23:37,533 | INFO     | tap_oracle_wms.tap   | Discovered 1 accessible entities\n2025-06-26 20:23:38,417 | INFO     | httpx                | HTTP Request: GET https://ta29.wms.ocs.oraclecloud.com/raizen_test/wms/lgfapi/v10/entity//allocation/describe/ \"HTTP/1.1 200 OK\"\n2025-06-26 20:23:38,418 | INFO     | tap_oracle_wms.tap   | \u2705 Generated schema for entity allocation\n2025-06-26 20:23:38,418 | INFO     | tap_oracle_wms.tap   | Generated schemas for 1/1 entities\n2025-06-26 20:23:38,423 | INFO     | tap_oracle_wms.tap   | Created 1 streams\n",
      "returncode": 0,
      "validation_details": [
        "Discovery validation successful - 1 streams, allocation schema complete"
      ],
      "command": "/home/marlonsc/pyauto/.venv/bin/python -m tap_oracle_wms --config config_e2e.json --discover"
    },
    {
      "name": "Entity Discovery CLI Test",
      "success": true,
      "duration": 2.0057570934295654,
      "stdout": "\n",
      "stderr": "",
      "returncode": 0,
      "validation_details": ["Entity discovery command completed successfully"],
      "command": "/home/marlonsc/pyauto/.venv/bin/python -m tap_oracle_wms discover entities --config config_e2e.json"
    },
    {
      "name": "Monitor Status CLI Test",
      "success": true,
      "duration": 2.7380521297454834,
      "stdout": "",
      "stderr": "",
      "returncode": 0,
      "validation_details": ["Monitor status command completed successfully"],
      "command": "/home/marlonsc/pyauto/.venv/bin/python -m tap_oracle_wms monitor status --config config_e2e.json"
    },
    {
      "name": "Data Extraction Full Test",
      "success": false,
      "duration": 17.09528946876526,
      "stdout": "{\"type\":\"SCHEMA\",\"stream\":\"allocation\",\"schema\":{\"properties\":{\"id\":{\"type\":\"string\"},\"alloc_qty\":{\"type\":\"number\"},\"status_id\":{\"type\":\"string\"},\"create_ts\":{\"format\":\"date-time\",\"type\":[\"string\",\"null\"]},\"mod_ts\":{\"format\":\"date-time\",\"type\":[\"string\",\"null\"]},\"from_inventory_id\":{\"type\":\"string\"},\"order_dtl_id\":{\"type\":\"string\"}},\"type\":\"object\",\"required\":[\"id\",\"alloc_qty\",\"status_id\",\"from_inventory_id\",\"order_dtl_id\"]},\"key_properties\":[\"id\"]}\n{\"type\":\"RECORD\",\"stream\":\"allocation\",\"record\":{\"id\":49171565,\"create_user\":\"GN338911\",\"create_ts\":\"2025-05-31T19:57:42.738709-03:00\",\"mod_user\":\"gn376157\",\"mod_ts\":\"2025-05-31T21:00:01.831732-03:00\",\"order_dtl_id\":{\"id\":316225879,\"key\":\"100002774185,1728581131\",\"url\":\"https://ta29.wms.ocs.oraclecloud.com:443/raizen_test/wms/lgfapi/v10/entity/order_dtl/316225879\"},\"from_inventory_id\":{\"id\":41260745,\"key\":\"\",\"url\":\"https://ta29.wms.ocs.oraclecloud.com:443/raizen_test/wms/lgfapi/v10/entity/inventory/41260745\"},\"to_inventory_id\":{\"id\":41626430,\"key\":\"\",\"url\":\"https://ta29.wms.ocs.oraclecloud.com:443/raizen_test/wms/lgfapi/v10/entity/inventory/41626430\"},\"status_id\":90,\"alloc_qty\":\"16\",\"packed_qty\":\"16\",\"type_id\":{\"id\":2,\"key\":\"Separacao Ativa\",\"url\":\"\"},\"wave_id\":{\"id\":5089383,\"key\":\"ONDA_LISTA0015025023\",\"url\":\"\"},\"task_id\":{\"id\":9933619,\"key\":\"T00109930748\",\"url\":\"https://ta29.wms.ocs.oraclecloud.com:443/raizen_test/wms/lgfapi/v10/entity/task/9933619\"},\"alloc_uom_id\":{\"id\":4,\"key\":\"Packs\",\"url\":\"https://ta29.wms.ocs.oraclecloud.com:443/raizen_test/wms/lgfapi/v10/entity/uom/4\"},\"cartonize_uom_id\":null,\"task_seq_nbr\":23,\"ob_lpn_type_id\":null,\"mhe_system_id\":{\"id\":55,\"key\":\"INDUCAO\",\"url\":\"\"},\"pick_user\":\"gn376157\",\"picked_ts\":\"2025-05-31T21:00:01.812405-03:00\",\"pick_locn_str\":\"2-20-57-01\",\"final_oblpn_nbr\":\"\",\"is_picking_flg\":true},\"time_extracted\":\"2025-06-26T23:24:00.254898+00:00\"}\n",
      "stderr": "2025-06-26 20:23:43,851 | WARNING  | py.warnings          | /home/marlonsc/pyauto/tap-oracle-wms/src/tap_oracle_wms/tap.py:217: SingerSDKDeprecationWarning: Passing a catalog file path is deprecated. Please pass the catalog as a dictionary or Catalog object instead.\n  super().__init__(*args, **kwargs)\n\n2025-06-26 20:23:43,852 | INFO     | tap_oracle_wms.tap   | Discovering Oracle WMS streams\n2025-06-26 20:23:43,852 | INFO     | tap_oracle_wms.discovery | Discovering entities from Oracle WMS API\n2025-06-26 20:23:44,782 | INFO     | httpx                | HTTP Request: GET https://ta29.wms.ocs.oraclecloud.com/raizen_test/wms/lgfapi/v10/entity/ \"HTTP/1.1 200 OK\"\n2025-06-26 20:23:45,193 | INFO     | tap_oracle_wms.discovery | Discovered 311 entities\n2025-06-26 20:23:45,193 | INFO     | tap_oracle_wms.tap   | Skipping access verification for 1 entities (set verify_entity_access=true to enable)\n2025-06-26 20:23:45,194 | INFO     | tap_oracle_wms.tap   | Discovered 1 accessible entities\n2025-06-26 20:23:46,094 | INFO     | httpx                | HTTP Request: GET https://ta29.wms.ocs.oraclecloud.com/raizen_test/wms/lgfapi/v10/entity//allocation/describe/ \"HTTP/1.1 200 OK\"\n2025-06-26 20:23:46,095 | INFO     | tap_oracle_wms.tap   | \u2705 Generated schema for entity allocation\n2025-06-26 20:23:46,095 | INFO     | tap_oracle_wms.tap   | Generated schemas for 1/1 entities\n2025-06-26 20:23:46,096 | INFO     | tap_oracle_wms.tap   | Created 1 streams\n2025-06-26 20:23:46,096 | INFO     | tap-oracle-wms.allocation | Beginning incremental sync of 'allocation'...\n2025-06-26 20:23:46,096 | INFO     | tap-oracle-wms.allocation | Tap has custom mapper. Using 1 provided map(s).\n2025-06-26 20:23:46,097 | WARNING  | py.warnings          | /home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/streams/rest.py:395: SingerSDKDeprecationWarning: Use `http_method` instead.\n  http_method = self.http_method\n\n2025-06-26 20:23:46,097 | INFO     | tap_oracle_wms.tap   | \ud83d\udd04 Initial incremental for allocation: mod_ts >= 2025-06-01T00:00:00Z\n2025-06-26 20:24:00,253 | INFO     | singer_sdk.metrics   | METRIC: {\"type\": \"timer\", \"metric\": \"http_request_duration\", \"value\": 12.57744, \"tags\": {\"stream\": \"allocation\", \"endpoint\": \"/wms/lgfapi/v10/entity/allocation\", \"http_status_code\": 200, \"status\": \"succeeded\"}}\n2025-06-26 20:24:00,254 | WARNING  | py.warnings          | /home/marlonsc/pyauto/tap-oracle-wms/src/tap_oracle_wms/streams.py:648: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).\n  row[\"_extracted_at\"] = datetime.utcnow().isoformat()\n\n2025-06-26 20:24:00,254 | WARNING  | tap-oracle-wms.allocation | Properties ('url', '_entity_name', '_extracted_at') were present in the 'allocation' stream but not found in catalog schema. Ignoring.\n2025-06-26 20:24:00,254 | INFO     | singer_sdk.metrics   | METRIC: {\"type\": \"counter\", \"metric\": \"http_request_count\", \"value\": 1, \"tags\": {\"stream\": \"allocation\", \"endpoint\": \"/wms/lgfapi/v10/entity/allocation\", \"pid\": 1605636}}\n2025-06-26 20:24:00,255 | INFO     | tap_oracle_wms.streams | Extracted 1 records from allocation in 14.16s (0.07 records/sec)\n2025-06-26 20:24:00,255 | INFO     | singer_sdk.metrics   | METRIC: {\"type\": \"timer\", \"metric\": \"sync_duration\", \"value\": 14.158295154571533, \"tags\": {\"stream\": \"allocation\", \"pid\": 1605636, \"context\": {}, \"status\": \"failed\"}}\n2025-06-26 20:24:00,255 | INFO     | singer_sdk.metrics   | METRIC: {\"type\": \"counter\", \"metric\": \"record_count\", \"value\": 0, \"tags\": {\"stream\": \"allocation\", \"pid\": 1605636, \"context\": {}}}\n2025-06-26 20:24:00,255 | ERROR    | tap-oracle-wms.allocation | An unhandled error occurred while syncing 'allocation'\nTraceback (most recent call last):\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/streams/core.py\", line 1246, in sync\n    for _ in self._sync_records(context=context):\n             ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/streams/core.py\", line 1173, in _sync_records\n    self._increment_stream_state(record, context=current_context)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/streams/core.py\", line 803, in _increment_stream_state\n    raise ValueError(msg)\nValueError: Could not detect replication key for 'allocation' stream(replication method=INCREMENTAL)\nTraceback (most recent call last):\n  File \"<frozen runpy>\", line 198, in _run_module_as_main\n  File \"<frozen runpy>\", line 88, in _run_code\n  File \"/home/marlonsc/pyauto/tap-oracle-wms/src/tap_oracle_wms/__main__.py\", line 6, in <module>\n    cli()\n    ~~~^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1161, in __call__\n    return self.main(*args, **kwargs)\n           ~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1082, in main\n    rv = self.invoke(ctx)\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1675, in invoke\n    rv = super().invoke(ctx)\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1443, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 788, in invoke\n    return __callback(*args, **kwargs)\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/decorators.py\", line 33, in new_func\n    return f(get_current_context(), *args, **kwargs)\n  File \"/home/marlonsc/pyauto/tap-oracle-wms/src/tap_oracle_wms/cli.py\", line 161, in cli\n    _handle_singer_mode(version, discover, catalog, config, state)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/tap-oracle-wms/src/tap_oracle_wms/cli.py\", line 195, in _handle_singer_mode\n    TapOracleWMS.cli()\n    ~~~~~~~~~~~~~~~~^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1161, in __call__\n    return self.main(*args, **kwargs)\n           ~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1082, in main\n    rv = self.invoke(ctx)\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/plugin_base.py\", line 93, in invoke\n    return super().invoke(ctx)\n           ~~~~~~~~~~~~~~^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1443, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 788, in invoke\n    return __callback(*args, **kwargs)\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/tap_base.py\", line 523, in invoke\n    tap.sync_all()\n    ~~~~~~~~~~~~^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/tap_base.py\", line 482, in sync_all\n    stream.sync()\n    ~~~~~~~~~~~^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/streams/core.py\", line 1246, in sync\n    for _ in self._sync_records(context=context):\n             ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/streams/core.py\", line 1173, in _sync_records\n    self._increment_stream_state(record, context=current_context)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/streams/core.py\", line 803, in _increment_stream_state\n    raise ValueError(msg)\nValueError: Could not detect replication key for 'allocation' stream(replication method=INCREMENTAL)\n",
      "returncode": 1,
      "validation_details": [],
      "command": "timeout 45s /home/marlonsc/pyauto/.venv/bin/python -m tap_oracle_wms --config config_e2e.json --catalog catalog_full_table.json"
    },
    {
      "name": "Error Handling Test",
      "success": true,
      "duration": 0.7084131240844727,
      "stdout": "",
      "stderr": "2025-06-26 20:24:00,933 | INFO     | tap_oracle_wms.tap   | Discovering Oracle WMS streams\n2025-06-26 20:24:00,933 | INFO     | tap_oracle_wms.discovery | Discovering entities from Oracle WMS API\n2025-06-26 20:24:00,943 | ERROR    | tap_oracle_wms.discovery | Network error discovering entities\nTraceback (most recent call last):\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_transports/default.py\", line 72, in map_httpcore_exceptions\n    yield\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_transports/default.py\", line 377, in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_async/connection_pool.py\", line 256, in handle_async_request\n    raise exc from None\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_async/connection_pool.py\", line 236, in handle_async_request\n    response = await connection.handle_async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        pool_request.request\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_async/connection.py\", line 101, in handle_async_request\n    raise exc\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_async/connection.py\", line 78, in handle_async_request\n    stream = await self._connect(request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_async/connection.py\", line 124, in _connect\n    stream = await self._network_backend.connect_tcp(**kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_backends/auto.py\", line 31, in connect_tcp\n    return await self._backend.connect_tcp(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<5 lines>...\n    )\n    ^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_backends/anyio.py\", line 113, in connect_tcp\n    with map_exceptions(exc_map):\n         ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"/usr/lib/python3.13/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_exceptions.py\", line 14, in map_exceptions\n    raise to_exc(exc) from exc\nhttpcore.ConnectError: [Errno -2] Name or service not known\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"/home/marlonsc/pyauto/tap-oracle-wms/src/tap_oracle_wms/discovery.py\", line 150, in discover_entities\n    response = await client.get(\n               ^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_client.py\", line 1814, in get\n    return await self.request(\n           ^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_client.py\", line 1585, in request\n    return await self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_client.py\", line 1674, in send\n    response = await self._send_handling_auth(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_client.py\", line 1702, in _send_handling_auth\n    response = await self._send_handling_redirects(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_client.py\", line 1739, in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_client.py\", line 1776, in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_transports/default.py\", line 376, in handle_async_request\n    with map_httpcore_exceptions():\n         ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/usr/lib/python3.13/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_transports/default.py\", line 89, in map_httpcore_exceptions\n    raise mapped_exc(message) from exc\nhttpx.ConnectError: [Errno -2] Name or service not known\nTraceback (most recent call last):\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_transports/default.py\", line 72, in map_httpcore_exceptions\n    yield\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_transports/default.py\", line 377, in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_async/connection_pool.py\", line 256, in handle_async_request\n    raise exc from None\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_async/connection_pool.py\", line 236, in handle_async_request\n    response = await connection.handle_async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        pool_request.request\n        ^^^^^^^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_async/connection.py\", line 101, in handle_async_request\n    raise exc\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_async/connection.py\", line 78, in handle_async_request\n    stream = await self._connect(request)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_async/connection.py\", line 124, in _connect\n    stream = await self._network_backend.connect_tcp(**kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_backends/auto.py\", line 31, in connect_tcp\n    return await self._backend.connect_tcp(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<5 lines>...\n    )\n    ^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_backends/anyio.py\", line 113, in connect_tcp\n    with map_exceptions(exc_map):\n         ~~~~~~~~~~~~~~^^^^^^^^^\n  File \"/usr/lib/python3.13/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpcore/_exceptions.py\", line 14, in map_exceptions\n    raise to_exc(exc) from exc\nhttpcore.ConnectError: [Errno -2] Name or service not known\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File \"<frozen runpy>\", line 198, in _run_module_as_main\n  File \"<frozen runpy>\", line 88, in _run_code\n  File \"/home/marlonsc/pyauto/tap-oracle-wms/src/tap_oracle_wms/__main__.py\", line 6, in <module>\n    cli()\n    ~~~^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1161, in __call__\n    return self.main(*args, **kwargs)\n           ~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1082, in main\n    rv = self.invoke(ctx)\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1675, in invoke\n    rv = super().invoke(ctx)\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1443, in invoke\n    return ctx.invoke(self.callback, **ctx.params)\n           ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 788, in invoke\n    return __callback(*args, **kwargs)\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/decorators.py\", line 33, in new_func\n    return f(get_current_context(), *args, **kwargs)\n  File \"/home/marlonsc/pyauto/tap-oracle-wms/src/tap_oracle_wms/cli.py\", line 161, in cli\n    _handle_singer_mode(version, discover, catalog, config, state)\n    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/tap-oracle-wms/src/tap_oracle_wms/cli.py\", line 195, in _handle_singer_mode\n    TapOracleWMS.cli()\n    ~~~~~~~~~~~~~~~~^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1161, in __call__\n    return self.main(*args, **kwargs)\n           ~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1081, in main\n    with self.make_context(prog_name, args, **extra) as ctx:\n         ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 949, in make_context\n    self.parse_args(ctx, args)\n    ~~~~~~~~~~~~~~~^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 1417, in parse_args\n    value, args = param.handle_parse_result(ctx, opts, args)\n                  ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 2403, in handle_parse_result\n    value = self.process_value(ctx, value)\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/click/core.py\", line 2365, in process_value\n    value = self.callback(ctx, self, value)\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/tap_base.py\", line 555, in cb_discover\n    tap.run_discovery()\n    ~~~~~~~~~~~~~~~~~^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/tap_base.py\", line 309, in run_discovery\n    catalog_text = self.catalog_json_text\n                   ^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/tap_base.py\", line 329, in catalog_json_text\n    return dump_json(self.catalog_dict, indent=2)\n                     ^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/tap_base.py\", line 320, in catalog_dict\n    return t.cast(\"dict\", self._singer_catalog.to_dict())\n                          ^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/tap_base.py\", line 340, in _singer_catalog\n    for stream in self.streams.values()\n                  ^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/tap_base.py\", line 149, in streams\n    for stream in self.load_streams():\n                  ~~~~~~~~~~~~~~~~~^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/singer_sdk/tap_base.py\", line 373, in load_streams\n    for stream in self.discover_streams():\n                  ~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/home/marlonsc/pyauto/tap-oracle-wms/src/tap_oracle_wms/tap.py\", line 675, in discover_streams\n    entities = asyncio.run(self._discover_and_filter_entities())\n  File \"/usr/lib/python3.13/asyncio/runners.py\", line 195, in run\n    return runner.run(main)\n           ~~~~~~~~~~^^^^^^\n  File \"/usr/lib/python3.13/asyncio/runners.py\", line 118, in run\n    return self._loop.run_until_complete(task)\n           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  File \"/usr/lib/python3.13/asyncio/base_events.py\", line 719, in run_until_complete\n    return future.result()\n           ~~~~~~~~~~~~~^^\n  File \"/home/marlonsc/pyauto/tap-oracle-wms/src/tap_oracle_wms/tap.py\", line 308, in _discover_and_filter_entities\n    all_entities = await self.entity_discovery.discover_entities()\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/tap-oracle-wms/src/tap_oracle_wms/discovery.py\", line 150, in discover_entities\n    response = await client.get(\n               ^^^^^^^^^^^^^^^^^\n    ...<2 lines>...\n    )\n    ^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_client.py\", line 1814, in get\n    return await self.request(\n           ^^^^^^^^^^^^^^^^^^^\n    ...<9 lines>...\n    )\n    ^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_client.py\", line 1585, in request\n    return await self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_client.py\", line 1674, in send\n    response = await self._send_handling_auth(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<4 lines>...\n    )\n    ^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_client.py\", line 1702, in _send_handling_auth\n    response = await self._send_handling_redirects(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    ...<3 lines>...\n    )\n    ^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_client.py\", line 1739, in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_client.py\", line 1776, in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_transports/default.py\", line 376, in handle_async_request\n    with map_httpcore_exceptions():\n         ~~~~~~~~~~~~~~~~~~~~~~~^^\n  File \"/usr/lib/python3.13/contextlib.py\", line 162, in __exit__\n    self.gen.throw(value)\n    ~~~~~~~~~~~~~~^^^^^^^\n  File \"/home/marlonsc/pyauto/.venv/lib/python3.13/site-packages/httpx/_transports/default.py\", line 89, in map_httpcore_exceptions\n    raise mapped_exc(message) from exc\nhttpx.ConnectError: [Errno -2] Name or service not known\n",
      "returncode": 1,
      "validation_details": [
        "Error handling working correctly - invalid config properly rejected"
      ],
      "command": "/home/marlonsc/pyauto/.venv/bin/python -m tap_oracle_wms --config config_invalid.json --discover"
    }
  ]
}
